---
layout: post
title: 使用cookie进行模拟登陆和动态抓取网页
date:   2017-10-27
---

爬虫有时候困难的地方，在于两点：

- 模拟登陆

- 抓取动态网页

---

越来越多的网页，如果需要看到，都必须要登陆才能看到，所以我们要爬取某些内容的话，都要进行模拟登陆，模拟登陆有很多的方法，这里我就说两个。

1，提交用户名和密码登陆，找到login的 url， 分析需要提交的表单，其中包括：用户名，密码，还有验证码(大多数情
况下都需要)，而且现在的验证码方式千奇百怪，各种各种，碰到传统的图片中的文字，还好解决，碰到其他的，真是一头
包。

2，使用cookie登陆，首先，我们要理解什么是cookie？很多网站，为了维持登陆状态，都会采用回话session进行实现，每次网站后台都会确认是不是已经登陆的客户，但是我又不能每次都让用户输入账户密码，所以，就要在用户端的cookie中，保存着用户的信息，每次用户要执行request，都会把cookie一起提交过去，服务端就会在用户提交的cookie中确定用户的信息。那么我们模拟登陆的办法就来了：1，cookie是存在客户端的，我们可以获取到。2，我们可以在请求的时候，把cookie数据一起提交，以达到让服务器认为我们已经登陆的消息。

所以我们可以采用cookie登陆的方式，进行模拟登陆，但是cookie一般是由过期时间的，所以我们就要去维护cookie的持久性。

---

另外一点，为了更好的用户体验，动态的加载网页，只更新需要更新的数据，大多数网站采用了Ajax的技术，异步加载的方式进行网页更新，这就对我们的爬虫产生了挑战，因为你要抓取的数据，可能是不在网页中的，那么我们就要去在网页中分析，Ajax请求的网页的url，然后用爬虫的方式，去获取该要的数据。

这一点，我们就要去分析js的脚本，去看看这个url究竟在哪里，去哪里请求。

---

以上两点，我就以知乎为力，写一个我的个人主页中，系统自动推送给我的那一页的问题和答案，用到使用cookie登陆和抓取动态网页这两个常用的东西。

github仓库地址：
